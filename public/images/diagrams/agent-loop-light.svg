<svg viewBox="0 0 520 310" width="100%" height="auto" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="The Agent Loop: Perceive, Reason, Act, Observe cycle">
  <defs>
    <filter id="shadow" x="-4%" y="-4%" width="108%" height="112%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#0f172a" flood-opacity="0.08"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="520" height="310" rx="16" fill="#f8fafc" stroke="#e2e8f0" stroke-width="1.5"/>
  <text x="260" y="28" text-anchor="middle" font-family="ui-sans-serif,system-ui,sans-serif" font-size="11" font-weight="700" letter-spacing="2.5" fill="#94a3b8">THE AGENT LOOP</text>

  <!-- PERCEIVE top-left -->
  <rect x="30" y="50" width="190" height="72" rx="12" fill="#ede9fe" stroke="#6366f1" stroke-width="1.8" filter="url(#shadow)"/>
  <text x="125" y="80" text-anchor="middle" font-family="ui-sans-serif,system-ui,sans-serif" font-size="15" font-weight="700" fill="#4f46e5">PERCEIVE</text>
  <text x="125" y="102" text-anchor="middle" font-family="ui-sans-serif,system-ui,sans-serif" font-size="10.5" fill="#6366f1" opacity="0.8">Sense environment &amp; results</text>

  <!-- REASON top-right -->
  <rect x="300" y="50" width="190" height="72" rx="12" fill="#f3e8ff" stroke="#8b5cf6" stroke-width="1.8" filter="url(#shadow)"/>
  <text x="395" y="80" text-anchor="middle" font-family="ui-sans-serif,system-ui,sans-serif" font-size="15" font-weight="700" fill="#7c3aed">REASON</text>
  <text x="395" y="102" text-anchor="middle" font-family="ui-sans-serif,system-ui,sans-serif" font-size="10.5" fill="#8b5cf6" opacity="0.8">LLM plans next action</text>

  <!-- ACT bottom-right -->
  <rect x="300" y="186" width="190" height="72" rx="12" fill="#d1fae5" stroke="#10b981" stroke-width="1.8" filter="url(#shadow)"/>
  <text x="395" y="216" text-anchor="middle" font-family="ui-sans-serif,system-ui,sans-serif" font-size="15" font-weight="700" fill="#059669">ACT</text>
  <text x="395" y="238" text-anchor="middle" font-family="ui-sans-serif,system-ui,sans-serif" font-size="10.5" fill="#10b981" opacity="0.8">Execute tool or respond</text>

  <!-- OBSERVE bottom-left -->
  <rect x="30" y="186" width="190" height="72" rx="12" fill="#fef3c7" stroke="#f59e0b" stroke-width="1.8" filter="url(#shadow)"/>
  <text x="125" y="216" text-anchor="middle" font-family="ui-sans-serif,system-ui,sans-serif" font-size="15" font-weight="700" fill="#d97706">OBSERVE</text>
  <text x="125" y="238" text-anchor="middle" font-family="ui-sans-serif,system-ui,sans-serif" font-size="10.5" fill="#f59e0b" opacity="0.8">Record result in memory</text>

  <!-- Arrow: PERCEIVE → REASON (top, right) -->
  <path d="M220,86 C248,86 252,86 280,86" fill="none" stroke="#6366f1" stroke-width="2.5" stroke-linecap="round"/>
  <polygon points="296,86 280,79 280,93" fill="#6366f1"/>

  <!-- Arrow: REASON → ACT (right side, down) -->
  <path d="M395,122 C395,140 395,148 395,168" fill="none" stroke="#8b5cf6" stroke-width="2.5" stroke-linecap="round"/>
  <polygon points="395,184 388,168 402,168" fill="#8b5cf6"/>

  <!-- Arrow: ACT → OBSERVE (bottom, left) -->
  <path d="M300,222 C272,222 268,222 240,222" fill="none" stroke="#10b981" stroke-width="2.5" stroke-linecap="round"/>
  <polygon points="224,222 240,215 240,229" fill="#10b981"/>

  <!-- Arrow: OBSERVE → PERCEIVE (left side, up) -->
  <path d="M125,186 C125,168 125,160 125,140" fill="none" stroke="#f59e0b" stroke-width="2.5" stroke-linecap="round"/>
  <polygon points="125,124 118,140 132,140" fill="#f59e0b"/>

  <!-- Center badge -->
  <rect x="196" y="140" width="128" height="30" rx="15" fill="#f1f5f9" stroke="#e2e8f0" stroke-width="1.2"/>
  <text x="260" y="160" text-anchor="middle" font-family="ui-sans-serif,system-ui,sans-serif" font-size="11" font-weight="600" fill="#64748b">Goal + Memory</text>

  <!-- Arrow labels -->
  <rect x="237" y="70" width="46" height="18" rx="4" fill="#f8fafc" stroke="#e2e8f0" stroke-width="0.8"/>
  <text x="260" y="83" text-anchor="middle" font-family="ui-sans-serif,system-ui,sans-serif" font-size="8.5" font-weight="600" fill="#6366f1">plan</text>

  <rect x="404" y="144" width="46" height="18" rx="4" fill="#f8fafc" stroke="#e2e8f0" stroke-width="0.8"/>
  <text x="427" y="157" text-anchor="middle" font-family="ui-sans-serif,system-ui,sans-serif" font-size="8.5" font-weight="600" fill="#8b5cf6">execute</text>

  <rect x="237" y="206" width="46" height="18" rx="4" fill="#f8fafc" stroke="#e2e8f0" stroke-width="0.8"/>
  <text x="260" y="219" text-anchor="middle" font-family="ui-sans-serif,system-ui,sans-serif" font-size="8.5" font-weight="600" fill="#10b981">result</text>

  <rect x="70" y="144" width="46" height="18" rx="4" fill="#f8fafc" stroke="#e2e8f0" stroke-width="0.8"/>
  <text x="93" y="157" text-anchor="middle" font-family="ui-sans-serif,system-ui,sans-serif" font-size="8.5" font-weight="600" fill="#f59e0b">update</text>
</svg>
